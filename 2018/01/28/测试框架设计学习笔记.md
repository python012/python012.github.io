---
title: "æµ‹è¯•æ¡†æ¶è®¾è®¡å­¦ä¹ ç¬”è®°"
date: 2018-01-28
tags:
  - Selenium
  - TestNG
  - æµ‹è¯•æ¡†æ¶
description: "Part Oneå¼€å§‹å­¦ä¹ Udemyä¸Šçš„ä¸€ä¸ªè¯¾ç¨‹Design Selenium Test framework from scratch-Architect levelï¼Œéšæ‰‹å†™ä¸€äº›ç¬”è®°ã€‚ è¯¾ç¨‹ç¬¬ä¸€éƒ¨åˆ†ä¸»è¦åœ¨è®²testNGï¼Œåœ¨é¡¹ç›®ä¸Šç›®å‰ä¸€ç›´æ¥è§¦çš„æ˜¯JUnitï¼Œç”¨èµ·æ¥è¿˜æ¯”è¾ƒæ–¹ä¾¿ï¼Œå°ç»“ä¸€ä¸‹ï¼Œç”¨åˆ°äº†JUnité‡Œä»¥ä¸‹ç‰¹æ€§ï¼š  Categoryï¼Œè¿›è¡Œtest caseåˆ†ç±»ï¼Œæ–¹ä¾¿åŒä¸€ä»½ä»£ç åœ¨ä¸åŒç¯å¢ƒä¸‹é€‰æ‹©æ‰§è¡Œä¸åŒçš„"
---

# æµ‹è¯•æ¡†æ¶è®¾è®¡å­¦ä¹ ç¬”è®°

<div class="article-meta">
  <span class="date">ğŸ“… å‘å¸ƒäºï¼š2018å¹´01æœˆ28æ—¥</span>
  <span class="tags">ğŸ·ï¸ æ ‡ç­¾ï¼š<span class="tag">Selenium</span> <span class="tag">TestNG</span> <span class="tag">æµ‹è¯•æ¡†æ¶</span></span>
</div>

# Part One

å¼€å§‹å­¦ä¹ Udemyä¸Šçš„ä¸€ä¸ªè¯¾ç¨‹Design Selenium Test framework from scratch-Architect levelï¼Œéšæ‰‹å†™ä¸€äº›ç¬”è®°ã€‚

è¯¾ç¨‹ç¬¬ä¸€éƒ¨åˆ†ä¸»è¦åœ¨è®²testNGï¼Œåœ¨é¡¹ç›®ä¸Šç›®å‰ä¸€ç›´æ¥è§¦çš„æ˜¯JUnitï¼Œç”¨èµ·æ¥è¿˜æ¯”è¾ƒæ–¹ä¾¿ï¼Œå°ç»“ä¸€ä¸‹ï¼Œç”¨åˆ°äº†JUnité‡Œä»¥ä¸‹ç‰¹æ€§ï¼š

- Categoryï¼Œè¿›è¡Œtest caseåˆ†ç±»ï¼Œæ–¹ä¾¿åŒä¸€ä»½ä»£ç åœ¨ä¸åŒç¯å¢ƒä¸‹é€‰æ‹©æ‰§è¡Œä¸åŒçš„test case
- Ruleï¼Œè§£å†³test caseæ‰§è¡Œå¤±è´¥æ—¶ï¼Œè¿›è¡Œæˆªå›¾å¹¶ä¸Šä¼ è‡³Jenkins
- Runnerï¼Œè§£å†³æ‰§è¡Œä¸­åŠ¨æ€å†³å®šæ˜¯å¦skipç‰¹å®šçš„test case

ç›®å‰åœ¨è¯¾ç¨‹ä¸­å­¦ä¹ åˆ°testNGçš„ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- testNGæœ¬èº«æ˜¯æµ‹è¯•æ¡†æ¶ï¼ŒåŠŸèƒ½æ¯”è¾ƒä¸°å¯Œ
- testNGåœ¨Eclipseä¸Šæœ‰æ’ä»¶æ”¯æŒï¼Œä½¿ç”¨æ–¹ä¾¿
- testNGå¯ä»¥ä½¿ç”¨testing.xmlæ¥æ§åˆ¶æµ‹è¯•æ‰§è¡Œæ§åˆ¶ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†äº†Suit -> test -> classes -> methodsè¿™æ ·å‡ ä¸ªåˆ†å±‚
- methodsæ ‡ç­¾ä¸‹å¯ä»¥ä½¿ç”¨includeã€excludeæ ‡ç­¾æ¥åŒ…å«æˆ–æ’é™¤æŸäº› methodï¼Œä¹Ÿå³test case
- method,ä¹Ÿå³test caseå‘½åçš„æ—¶å€™è¦éµå¾ªä¸€ä¸ªç»Ÿä¸€çš„è§„åˆ™ï¼Œæ¯”å¦‚FunctionOneLogin(), FunctionTwoOpen()ç­‰ï¼Œæ–¹ä¾¿åç»­åœ¨é€‰æ‹©æ‰§è¡Œçš„æ—¶å€™ï¼Œç”¨æ­£åˆ™è¡¨è¾¾å¼ç­›é€‰test caseï¼Œä¾‹å¦‚name=â€Fun.*â€è¡¨ç¤ºç›¸åº”çš„classé‡Œæ‰€æœ‰ä»¥â€Funâ€å¼€å¤´çš„test case

# Part Two

å­¦ä¹ åˆ°ç¬¬12èŠ‚è¯¾ç¨‹ï¼Œäº†è§£åˆ°testNGçš„anotationæœ‰ä»¥ä¸‹(and more)ï¼š

- @BeforeSuitesuiteæ˜¯testNGä½¿ç”¨çš„xmlæ–‡ä»¶ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œä¹Ÿè®¸å¯ä»¥ç†è§£ä¸ºæœ€ä¸Šå±‚çš„ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¥—ä»¶ï¼Œä¸€ä¸ªsuiteå¯ä»¥åŒ…å«æœ‰å¤šä¸ªtest
- @BeforeTesttestè¿™é‡Œå¯ä»¥ç†è§£æˆä¸€ä¸ªæµ‹è¯•æ¨¡å—(test module)ï¼Œä¸€ä¸ªtestå¯åŒ…å«å¤šä¸ªæµ‹è¯•ç±»class
- @BeforeClassclassæ˜¯æŒ‡æµ‹è¯•ç±»ï¼ŒBeforeClassç”¨æ¥æ ‡è®°åœ¨ä¸€æ•´ä¸ªclassæµ‹è¯•ç±»é‡Œçš„æ‰€æœ‰æµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹å‰ä¼˜å…ˆæ‰§è¡Œ
- @BeforeMethodmethodï¼Œå°±æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªtestç±»ä¸­çš„å•ä¸ªæµ‹è¯•æ–¹æ³•
- @Testç”¨æ¥æ³¨é‡ŠæŸä¸ªæµ‹è¯•ç±»é‡Œçš„æ–¹æ³•æ˜¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œä¹Ÿå³æµ‹è¯•ç”¨ä¾‹
- @AfterMethod
- @AfterClass
- @AfterTest
- @AfterSuite

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suitename="Test suite - 1">
<testthread-count="5"name="My Test module 1">
<classes>
<classname="com.main.MainTest01"/>
<classname="com.test.NGTest01"/>
</classes>
</test>
<testname="My Test module - 2">
<classes>
<classname="com.test.NGTest02"/>
</classes>
</test>
</suite>

```text

è¡¥å……ä¸€ä¸‹ï¼ŒtestNGä¸­çš„xmlè¿˜å¯ä»¥ä½¿ç”¨packageæ ‡ç­¾ï¼Œå«ä¹‰ä¸è¨€è‡ªæ˜ã€‚

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suitename="My Test Suite">
<testthread-count="5"name="My Test module">
<packages>
<packagename="com.main"></package>
</packages>
</test>
</suite>

```bash

# Part Three

å­¦ä¹ åˆ°18èŠ‚ï¼Œå®Œæˆäº†testNGçš„éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…æ‹¬äº†ä»¥ä¸‹testNGçš„ç‰¹æ€§ï¼š

- groupï¼Œä¾‹å¦‚åŠ ä¸Štag@Test(groups={â€œsmokeâ€})ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªtestå±äºsmoke groupï¼Œå¯ä»¥å±äºå¤šä¸ªgroupï¼Œç„¶åç›¸åº”çš„åœ¨xmlæ–‡ä»¶ä¸­ï¼Œåšå¦‚ä¸‹å®šä¹‰ï¼Œå³å¯ä½¿ç”¨groupï¼Œè¿™é‡Œå¯ä»¥includeä¹Ÿå¯ä»¥excludeã€‚

```xml
<suitename="Test - 1">
<testname="My Test modul">
<groups>
<run>
<includename="smoke"/>
</run>
</groups>
<classes>
<classname="com.main.MainTest01"/>
<classname="com.test.NGTest01"/>
</classes>
</test>
</suite>

```text

- å®šä¹‰testä¹‹é—´çš„ä¾èµ–æ‰§è¡Œï¼Œä¾‹å¦‚åŠ ä¸Štag@Test(dependsOnMethods={â€œMain03â€})ï¼Œå³è¡¨ç¤ºè¿™ä¸ªtestä¾èµ–äºå¦ä¸€ä¸ªtest Main03ï¼Œå°†åœ¨å…¶ä¹‹åæ‰§è¡Œã€‚
- å‚æ•°åŒ–ï¼Œä¾‹å¦‚ä»¥ä¸‹tagçš„å®šä¹‰ï¼Œå’Œxmlé‡Œçš„å®šä¹‰ï¼Œè¿™æ ·å³å¯è®©Main03 testä½¿ç”¨xmlé‡Œå®šä¹‰çš„å˜é‡å€¼ã€‚

```text
// å±äº com.main packageé‡Œçš„ MainTest class
@Parameters({"URL1","URL2"})
@Test
publicvoidMain03(String url1, String url2){
System.out.println("main 03");
System.out.println(url1);
System.out.println(url2);
}

```

```xml
<suitename="My Tet Suite">
<parametername="URL1"value="www.google.com"/>
<parametername="URL2"value="www.facebook.com"/>

<testname="My Test modul">
<packages>
<packagename="com.main"/>
</packages>
</test>
</suite>

```text

- @DataProviderç‰¹æ€§ï¼Œå…·ä½“è¿˜æ˜¯è§ä»£ç 

```text
@DataProvider
publicString[][] getData() {
String[][] data =newString[2][2];
data[0][0] ="1st-username";
data[0][1] ="1st-password";

data[1][0] ="2nd-username";
data[1][1] ="2nd-password";

returndata;
}

//è¿™ä¸ªtestä¼šè¢«æ‰§è¡Œ2æ¬¡ï¼Œä»¥ä¾¿ä½¿ç”¨getData()é‡Œæä¾›çš„ï¼Œæ‰€æœ‰çš„2ç»„æµ‹è¯•æ•°æ®
@Test(dataProvider="getData")
publicvoidMain05(String username, String password){
System.out.println(username);
System.out.println(password);
}

```text

- Listenersç‰¹æ€§ï¼Œæœ‰ç‚¹åƒJUnité‡Œçš„TestWatcherï¼Œå…¸å‹ç”¨æ³•å°±æ˜¯å¤±è´¥åæˆªå›¾ï¼Œå…·ä½“è§ä»£ç ..

```java
packagecom.main;

importorg.testng.ITestContext;
importorg.testng.ITestListener;
importorg.testng.ITestResult;

publicclassListenersimplementsITestListener{

@Override
publicvoidonTestStart(ITestResult result){
// do something when a test just start

}

@Override
publicvoidonTestSuccess(ITestResult result){
// do something when a test success
}

@Override
publicvoidonTestFailure(ITestResult result){
// do something when a test fail
}

@Override
publicvoidonTestSkipped(ITestResult result){
// do something when a test is skipped
}

@Override
publicvoidonTestFailedButWithinSuccessPercentage(ITestResult result){
// TODO Auto-generated method stub
}

@Override
publicvoidonStart(ITestContext context){
// TODO Auto-generated method stub
}

@Override
publicvoidonFinish(ITestContext context){
// TODO Auto-generated method stub
}
}

```

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suitename="My Tet Suite">
<listeners>
<listenerclass-name="com.main.Listeners"/>
</listeners>

<parametername="URL1"value="www.google.com"/>
<parametername="URL2"value="www.facebook.com"/>

<testthread-count="5"name="My Test modul">
<packages>
<packagename="com.main"></package>
</packages>
</test>
</suite>

```